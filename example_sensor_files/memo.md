クラス: コード

##加速度センサ

http://qiita.com/sh8/items/d48488c7ae8817de6074

I2Cを用いたもの
はじめにI2Cの有効か、データをやりとりするアドレスを把握しておく必要あり。

```
$ sudo raspi-config
"8 Advanced Options" -> "A7 I2C" と選択
```

```
$ sudo apt-get install i2c-tools
$ sudo i2cdetect -y 1
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- 18 -- -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- --  
```

```
$ sudo /usr/sbin/i2cget -y 1 0x18(デバイスアドレス) 0x0F b
-> 0x33
上記で0x33が返却されれば正しく接続されています。
$ sudo /usr/sbin/i2cset -y 1 0x18(デバイスアドレス) 0x20 0x27 b
```

##音センサー
http://dotnsf.blog.jp/archives/1052664142.html
2秒の間,0.1秒ごとに音を計測する。音がなっていると判定した回数を送信。それを無限ループしている？
2秒ごとの音の状況をずっとおくっている。



##温度・湿度・光センサー
http://tech.toreta.in/entry/2016/02/15/153203

 - 温度・湿度センサー(DHT11): gpio。今回はパッケージとして値をとるためのメソッドなどが用意されていたのでそれを利用。

 - 光センサー(BH1750FVI): I2C

##静電容量タッチセンサー

http://www.indetail.co.jp/blog/10215/

gpio,1か0でタッチしているかどうか判定

また、Server-Sent Events (SSE)をつかってデータをサーバにpushしているっぽい。

##co2のセンサもあるっぽい
http://qiita.com/UedaTakeyuki/items/c5226960a7328155635f


###コードからセンサ考察

 - やってること
1. GPIOのPIN設定 or I2Cのアドレス設定
2. センサ読み取りに関わる初期値設定
3. データを鯖へのpush(システムによるがネットワークに繋がることを考えれば当然必要であろう)
4. 例外処理(tryとexceptionがある)

メソッドに引数として当たってくるであろう値、その他のセンサのあたりを利用した

##カプセル化
メソッドを分けてやること以下の評価基準に対応

###情報隠蔽
インスタンス化した際、設定が自動で行われる点ではおk。
get_sensor_valueで値がとってくるっていうことがわかっているので、他のプログラムから呼ぶときはわかりやすいと思う。
例外が行った時の処理を書いておくことで、なにが呼び出されているか他の人がみたときにわかりやすい。

###変更の影響の局所化
例外処理、PIN番号・環境変数の変更はなし(コンストラクタ)で値の取得方法だけが変わった時、たとえば計算式が変わったとか?。そんなときは値を取得するメソッドを修正すればよいのでおk。

##継承
###再利用
必要なところだけ継承すればよいのでこれでいいと思われる。

##多態性
現状では、抽象度が高いものを考えているのでこれは問題ないであろう。

##以上を踏まえて

正直現状では、既存の他者のコードをみて、行っていることをあげてそれを整理しメソッドにしただけである。これで考えてきたと言っていいのか...

I2CやSPIの通信を行う際は、具体的にコードを書くときに記述しないとどうにもならないと思うので(参照先アドレスとかすでに決まっているとは想定しづらい)。
よって、あらかじめ用意したらいいと思うのはEventHandlerを格納する配列やセンサー間で値の共有がしやすいようにするためのクラス変数などではないだろうか？
理由として、センサー同士で値をやりとりが行いやすいと行える幅が広がると思うから。




##メモ
オブジェクト指向プログラミングの特徴

カプセル化(encapsulation): 変更の影響を局所化、情報隠蔽(ブラックボックス化)
継承(inherent): 再利用、振る舞いの統一性
多態性(polymorphism): 抽象度の高い記述が可能。Dynamic binding


##ぱっと思いついたこと
たとえば、あるセンサクラスが途中で終了してしまった場合は？
新しくインスタンス化してgpio番号などの設定を行う？

たとえば、人感センサーが反応したら呼び出されるor音センサーが反応したら呼び出されるようなあるセンサがあった場合、それぞれのセンサクラスをインスタンス化するのは良くないと考えられる。よって、複数インスタンス化されてほしくないものには特定の変数を設定しておき、インスタンス化を防ぐ。
これは複数センサがある場合はおkだが、共通の１つしかないセンサを扱うときに

エアコンとか、電源をつけてから温度を計測するようなセンサがあるはず。よってフラグを立てるか立てないかで動くクラスがあってもいい？？

